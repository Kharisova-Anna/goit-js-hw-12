{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"46160899-12bbcf382b0949676f8e01c93\";\n\nexport async function fetchImages({ query, page = 1 }) {\n    try {\n        const response = await axios.get(`${BASE_URL}`, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page,\n                per_page: 15\n            }\n        });\n\n        if (response.data.hits.length === 0) {\n            throw new Error(\"Sorry, there are no images matching your search query. Please try again!\");\n        }\n\n        return response.data;\n    } catch (error) {\n        \n        if (error.response) {\n            \n            throw new Error(`Server Error: ${error.response.status} - ${error.response.statusText}`);\n        } else if (error.request) {\n            throw new Error(\"Network error occurred. Please check your connection or try again later.\");\n        } else {\n            throw new Error(`Error: ${error.message}`);\n        }\n    }\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n\nexport function clearGallery(galleryElement) {\n  galleryElement.innerHTML = '';\n}\n\nexport function renderGallery(images, galleryElement) {\n  const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n    return `\n    <li class =\"gallery-item\">\n      <a href=\"${largeImageURL}\" class=\"gallery-link\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\" loading=\"lazy\" />\n        <div class=\"info\">\n          <p class=\"info-item\"><b>Likes:</b> ${likes}</p>\n          <p class=\"info-item\"><b>Views:</b> ${views}</p>\n          <p class=\"info-item\"><b>Comments:</b> ${comments}</p>\n          <p class=\"info-item\"><b>Downloads:</b> ${downloads}</p>\n        </div>\n      </a>\n      </li>`;\n  }).join(\"\");\n  \n  galleryElement.insertAdjacentHTML(\"beforeend\", markup);\n}","import { fetchImages } from \"./js/pixabay-api.js\";\nimport { renderGallery, clearGallery } from \"./js/render-functions.js\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst searchForm = document.querySelector(\".search-form\");\nconst galleryElement = document.querySelector(\".gallery\");\nconst loadMoreButton = document.querySelector(\".load-more\"); \nconst loader = document.querySelector(\".loader\"); \nconst lightbox = new SimpleLightbox(\".gallery a\", {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nlet searchQuery = '';\nlet currentPage = 1; \nconst perPage = 15; \nlet totalHits = 0;\n\nfunction showError(message) {\n    iziToast.error({\n        title: \"Error\",\n        message,\n    });\n}\n\nfunction showInfo(message) {\n    iziToast.info({\n        title: \"Info\",\n        message,\n    });\n}\n\nsearchForm.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    searchQuery = event.target.elements.searchQuery.value.trim(); \n    \n    if (!searchQuery) {\n        showError(\"Please enter a search term.\");\n        return;\n    }\n\n    currentPage = 1; \n    clearGallery(galleryElement); \n    loadMoreButton.style.display = \"none\"; \n    totalHits = 0; \n\n    try {\n        loader.style.display = \"block\";\n        const data = await fetchImages({ query: searchQuery, page: currentPage });\n\n        totalHits = data.totalHits; \n\n        if (data.hits.length === 0) {\n            showError(\"Sorry, there are no images matching your search query. Please try again!\");\n        } else {\n            renderGallery(data.hits, galleryElement); \n            lightbox.refresh(); \n            loadMoreButton.style.display = totalHits > perPage ? \"block\" : \"none\";\n        }\n    } catch (error) {\n        showError(error.message);\n    } finally {\n        loader.style.display = \"none\";\n    }\n});\n\nloadMoreButton.addEventListener(\"click\", async () => {\n    currentPage += 1;\n\n    try {\n        loader.style.display = \"block\";\n        const data = await fetchImages({ query: searchQuery, page: currentPage });\n\n        if (data.hits.length > 0) {\n            renderGallery(data.hits, galleryElement);\n            lightbox.refresh();\n            const galleryItem = document.querySelector(\".gallery-item\");\n            if (galleryItem) {\n                const { height } = galleryItem.getBoundingClientRect();\n                window.scrollBy({\n                    top: height * 2,\n                    behavior: \"smooth\"\n                });\n            }\n\n            const totalPages = Math.ceil(totalHits / perPage); \n            if (currentPage >= totalPages) {\n                loadMoreButton.style.display = \"none\"; \n                showInfo(\"We're sorry, but you've reached the end of search results.\");\n            }\n        }\n    } catch (error) {\n        showError(`Error fetching more images: ${error.message}`);\n    } finally {\n        loader.style.display = \"none\";\n    }\n});\n"],"names":["BASE_URL","API_KEY","fetchImages","query","page","response","axios","error","clearGallery","galleryElement","renderGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","loadMoreButton","loader","lightbox","SimpleLightbox","searchQuery","currentPage","perPage","totalHits","showError","message","iziToast","showInfo","event","data","galleryItem","height","totalPages"],"mappings":"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"}